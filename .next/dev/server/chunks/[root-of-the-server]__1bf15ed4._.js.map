{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Downloads/Learning-Management-System-feature-refactor-code-vinonnsan-all-page/src/lib/email/constants.ts"],"sourcesContent":["export const EMAIL_FROM = `\"MasterBrain\" <no-reply@masterbrain.site>`;\nexport const ADMIN_EMAIL = process.env.EMAIL_TO!;\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,aAAa,CAAC,yCAAyC,CAAC;AAC9D,MAAM,cAAc,QAAQ,GAAG,CAAC,QAAQ"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Downloads/Learning-Management-System-feature-refactor-code-vinonnsan-all-page/src/lib/email/templates/contact.template.ts"],"sourcesContent":["interface ContactTemplateProps {\n  name: string;\n  email: string;\n  phone?: string;\n  course?: string;\n  message: string;\n}\n\nexport const contactTemplate = ({\n  name,\n  email,\n  phone,\n  course,\n  message,\n}: ContactTemplateProps) => ({\n  subject: \"New Contact Form Submission\",\n  html: `\n    <div style=\"font-family: Arial, sans-serif; background-color: #f6f8fb; padding: 24px;\">\n      <div style=\"max-width: 640px; margin: 0 auto; background: #ffffff; border-radius: 12px; padding: 24px; border: 1px solid #e5e7eb;\">\n        <div style=\"display: flex; align-items: center; gap: 12px;\">\n         \n          <div>\n            <div style=\"font-size: 18px; font-weight: 700; color: #111827;\">New Contact Message</div>\n            <div style=\"font-size: 12px; color: #6b7280;\">MasterBrain Contact Form</div>\n          </div>\n        </div>\n\n        <div style=\"margin-top: 20px; padding: 16px; background: #f9fafb; border-radius: 10px; border: 1px solid #eef2f7;\">\n          <table style=\"width: 100%; border-collapse: collapse; font-size: 14px; color: #111827;\">\n            <tr>\n              <td style=\"padding: 6px 0; width: 140px; color: #6b7280;\">Name</td>\n              <td style=\"padding: 6px 0; font-weight: 600;\">${name}</td>\n            </tr>\n            <tr>\n              <td style=\"padding: 6px 0; width: 140px; color: #6b7280;\">Email</td>\n              <td style=\"padding: 6px 0; font-weight: 600;\">${email}</td>\n            </tr>\n            <tr>\n              <td style=\"padding: 6px 0; width: 140px; color: #6b7280;\">Phone / WhatsApp</td>\n              <td style=\"padding: 6px 0; font-weight: 600;\">${phone || \"Not provided\"}</td>\n            </tr>\n            <tr>\n              <td style=\"padding: 6px 0; width: 140px; color: #6b7280;\">Interested Course</td>\n              <td style=\"padding: 6px 0; font-weight: 600;\">${course || \"Not selected\"}</td>\n            </tr>\n          </table>\n        </div>\n\n        <div style=\"margin-top: 20px;\">\n          <div style=\"font-size: 13px; font-weight: 700; color: #111827; margin-bottom: 8px;\">Message</div>\n          <div style=\"font-size: 14px; line-height: 1.6; color: #111827; background: #ffffff; border-left: 4px solid #0f172a; padding: 12px 14px;\">\n            ${message}\n          </div>\n        </div>\n\n        <div style=\"margin-top: 24px; font-size: 12px; color: #6b7280; text-align: center;\">\n          Reply directly to this email to reach the sender.\n        </div>\n      </div>\n    </div>\n  `,\n});\n"],"names":[],"mappings":";;;;AAQO,MAAM,kBAAkB,CAAC,EAC9B,IAAI,EACJ,KAAK,EACL,KAAK,EACL,MAAM,EACN,OAAO,EACc,GAAK,CAAC;QAC3B,SAAS;QACT,MAAM,CAAC;;;;;;;;;;;;;;;4DAemD,EAAE,KAAK;;;;4DAIP,EAAE,MAAM;;;;4DAIR,EAAE,SAAS,eAAe;;;;4DAI1B,EAAE,UAAU,eAAe;;;;;;;;YAQ3E,EAAE,QAAQ;;;;;;;;;EASpB,CAAC;IACH,CAAC"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Downloads/Learning-Management-System-feature-refactor-code-vinonnsan-all-page/src/app/api/contact/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport nodemailer from \"nodemailer\";\n\nimport { EMAIL_FROM, ADMIN_EMAIL } from \"@/src/lib/email/constants\";\nimport { contactTemplate } from \"@/src/lib/email/templates/contact.template\";\n\ntype ContactPayload = {\n  fullName: string;\n  email: string;\n  phone?: string;\n  course?: string;\n  message: string;\n};\n\nconst isNonEmpty = (value?: string) => Boolean(value && value.trim().length > 0);\n\nexport async function POST(req: Request) {\n  try {\n    const body = (await req.json()) as ContactPayload;\n\n    if (!isNonEmpty(body.fullName) || !isNonEmpty(body.email) || !isNonEmpty(body.message)) {\n      return NextResponse.json(\n        { error: \"Full name, email, and message are required.\" },\n        { status: 400 }\n      );\n    }\n\n    const emailUser = process.env.EMAIL_USER;\n    const emailPass = process.env.EMAIL_PASS;\n\n    if (!emailUser || !emailPass || !ADMIN_EMAIL) {\n      return NextResponse.json(\n        { error: \"Email service is not configured.\" },\n        { status: 500 }\n      );\n    }\n\n    const transporter = nodemailer.createTransport({\n      service: \"gmail\",\n      auth: {\n        user: emailUser,\n        pass: emailPass,\n      },\n    });\n\n    const { subject, html } = contactTemplate({\n      name: body.fullName.trim(),\n      email: body.email.trim(),\n      phone: body.phone?.trim(),\n      course: body.course?.trim(),\n      message: body.message.trim(),\n    });\n\n    await transporter.sendMail({\n      from: EMAIL_FROM,\n      to: ADMIN_EMAIL,\n      replyTo: body.email.trim(),\n      subject,\n      html,\n    });\n\n    return NextResponse.json({ ok: true });\n  } catch (error) {\n    console.error(\"Contact form error:\", error);\n    return NextResponse.json(\n      { error: \"Failed to send message. Please try again later.\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AACA;;;;;AAUA,MAAM,aAAa,CAAC,QAAmB,QAAQ,SAAS,MAAM,IAAI,GAAG,MAAM,GAAG;AAEvE,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAQ,MAAM,IAAI,IAAI;QAE5B,IAAI,CAAC,WAAW,KAAK,QAAQ,KAAK,CAAC,WAAW,KAAK,KAAK,KAAK,CAAC,WAAW,KAAK,OAAO,GAAG;YACtF,OAAO,+PAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA8C,GACvD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,YAAY,QAAQ,GAAG,CAAC,UAAU;QACxC,MAAM,YAAY,QAAQ,GAAG,CAAC,UAAU;QAExC,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,iJAAW,EAAE;YAC5C,OAAO,+PAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAmC,GAC5C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,cAAc,oNAAU,CAAC,eAAe,CAAC;YAC7C,SAAS;YACT,MAAM;gBACJ,MAAM;gBACN,MAAM;YACR;QACF;QAEA,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,4KAAe,EAAC;YACxC,MAAM,KAAK,QAAQ,CAAC,IAAI;YACxB,OAAO,KAAK,KAAK,CAAC,IAAI;YACtB,OAAO,KAAK,KAAK,EAAE;YACnB,QAAQ,KAAK,MAAM,EAAE;YACrB,SAAS,KAAK,OAAO,CAAC,IAAI;QAC5B;QAEA,MAAM,YAAY,QAAQ,CAAC;YACzB,MAAM,gJAAU;YAChB,IAAI,iJAAW;YACf,SAAS,KAAK,KAAK,CAAC,IAAI;YACxB;YACA;QACF;QAEA,OAAO,+PAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,+PAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAkD,GAC3D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}